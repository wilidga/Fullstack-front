{"ast":null,"code":"var _jsxFileName = \"/Users/wilidga/Developer/MERN/FullStack/ITijuana-demo/final-project-front/src/components/comments/CommentDetail.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/authContext\";\nimport postsApi from \"../../helpers/postsApi\";\nimport { EditingComment } from \"./EditingComment\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const CommentDetail = () => {\n  _s();\n\n  var _commentState$author, _commentState$author2;\n\n  const params = useParams();\n  const {\n    id,\n    idcomment\n  } = params;\n  const {\n    userState\n  } = useContext(AuthContext);\n  const [commentState, setCommentState] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [editing, setEditing] = useState(false);\n  const [reload, setReload] = useState(true);\n  const navigate = useNavigate();\n\n  const fetchPost = async () => {\n    try {\n      const {\n        data\n      } = await postsApi.get(`posts/${id}/comments/${idcomment}`);\n      setCommentState(data.comment);\n      setLoading(false);\n    } catch (error) {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (reload) {\n      fetchPost();\n      setReload(false);\n    }\n  }, [reload]);\n\n  const deletePost = async () => {\n    try {\n      let config = {\n        headers: {\n          authorization: \"Bearer \" + userState.user.token\n        }\n      };\n      const res = await postsApi.delete(`posts/${id}/comments/${idcomment}`, config);\n      navigate(`/post/${id}`);\n    } catch (error) {\n      var _error$response, _error$response$data;\n\n      alert((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.msg);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [\" \", /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"cargando...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: editing ? /*#__PURE__*/_jsxDEV(EditingComment, {\n          commentToUpdate: commentState,\n          setEditing: setEditing,\n          setReload: setReload\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \" container px-5 py-5\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-sm-12 sm-6 col-md-9 d-flex align-items-center\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: commentState.comment && commentState.comment\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-sm-12 sm-6 col-md-3 d-flex flex-column \",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `http://localhost:8000/${commentState.image}`,\n                  alt: \"\",\n                  className: \"img-fluid pt-2 mb-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 72,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"my-span\",\n                    children: \"Author:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 78,\n                    columnNumber: 25\n                  }, this), \" \", ` ${commentState === null || commentState === void 0 ? void 0 : (_commentState$author = commentState.author) === null || _commentState$author === void 0 ? void 0 : _commentState$author.fullName}`]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 77,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"my-span\",\n                    children: \"Email:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 82,\n                    columnNumber: 25\n                  }, this), `  ${commentState === null || commentState === void 0 ? void 0 : (_commentState$author2 = commentState.author) === null || _commentState$author2 === void 0 ? void 0 : _commentState$author2.email}`]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-between m-0\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"my-btn-danger  m-2\",\n                    onClick: deletePost,\n                    children: \"delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 86,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"my-btn m-2\",\n                    onClick: () => setEditing(true),\n                    style: {\n                      display: \"block\"\n                    },\n                    children: \"update\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 92,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back\",\n            onClick: () => navigate(`/post/${id}`),\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"bi bi-backspace\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 19\n            }, this), \" back\", \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      }, void 0, false)\n    }, void 0, false)]\n  }, void 0, true);\n};\n\n_s(CommentDetail, \"SgC1eMTjB3T9iiLgcC2TmZlmt6I=\", false, function () {\n  return [useParams, useNavigate];\n});\n\n_c = CommentDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommentDetail\");","map":{"version":3,"sources":["/Users/wilidga/Developer/MERN/FullStack/ITijuana-demo/final-project-front/src/components/comments/CommentDetail.js"],"names":["React","useContext","useEffect","useState","Link","useNavigate","useParams","AuthContext","postsApi","EditingComment","CommentDetail","params","id","idcomment","userState","commentState","setCommentState","loading","setLoading","editing","setEditing","reload","setReload","navigate","fetchPost","data","get","comment","error","deletePost","config","headers","authorization","user","token","res","delete","alert","response","msg","image","author","fullName","email","display"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,SAASC,IAAT,EAAeC,WAAf,EAA4BC,SAA5B,QAA6C,kBAA7C;AACA,SAASC,WAAT,QAA4B,2BAA5B;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,SAASC,cAAT,QAA+B,kBAA/B;;;AAEA,OAAO,MAAMC,aAAa,GAAG,MAAM;AAAA;;AAAA;;AACjC,QAAMC,MAAM,GAAGL,SAAS,EAAxB;AACA,QAAM;AAAEM,IAAAA,EAAF;AAAMC,IAAAA;AAAN,MAAoBF,MAA1B;AAEA,QAAM;AAAEG,IAAAA;AAAF,MAAgBb,UAAU,CAACM,WAAD,CAAhC;AACA,QAAM,CAACQ,YAAD,EAAeC,eAAf,IAAkCb,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACc,OAAD,EAAUC,UAAV,IAAwBf,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACgB,OAAD,EAAUC,UAAV,IAAwBjB,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACkB,MAAD,EAASC,SAAT,IAAsBnB,QAAQ,CAAC,IAAD,CAApC;AACA,QAAMoB,QAAQ,GAAGlB,WAAW,EAA5B;;AAEA,QAAMmB,SAAS,GAAG,YAAY;AAC5B,QAAI;AACF,YAAM;AAAEC,QAAAA;AAAF,UAAW,MAAMjB,QAAQ,CAACkB,GAAT,CAAc,SAAQd,EAAG,aAAYC,SAAU,EAA/C,CAAvB;AACAG,MAAAA,eAAe,CAACS,IAAI,CAACE,OAAN,CAAf;AACAT,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KAJD,CAIE,OAAOU,KAAP,EAAc;AACdV,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD;AACF,GARD;;AASAhB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAImB,MAAJ,EAAY;AACVG,MAAAA,SAAS;AACTF,MAAAA,SAAS,CAAC,KAAD,CAAT;AACD;AACF,GALQ,EAKN,CAACD,MAAD,CALM,CAAT;;AAOA,QAAMQ,UAAU,GAAG,YAAY;AAC7B,QAAI;AACF,UAAIC,MAAM,GAAG;AACXC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAE,YAAYlB,SAAS,CAACmB,IAAV,CAAeC;AADnC;AADE,OAAb;AAKA,YAAMC,GAAG,GAAG,MAAM3B,QAAQ,CAAC4B,MAAT,CACf,SAAQxB,EAAG,aAAYC,SAAU,EADlB,EAEhBiB,MAFgB,CAAlB;AAIAP,MAAAA,QAAQ,CAAE,SAAQX,EAAG,EAAb,CAAR;AACD,KAXD,CAWE,OAAOgB,KAAP,EAAc;AAAA;;AACdS,MAAAA,KAAK,oBAACT,KAAK,CAACU,QAAP,4EAAC,gBAAgBb,IAAjB,yDAAC,qBAAsBc,GAAvB,CAAL;AACD;AACF,GAfD;;AAgBA,sBACE;AAAA,eACG,GADH,eAEE;AAAA,gBACGtB,OAAO,gBACN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADM,gBAGN;AAAA,kBACGE,OAAO,gBACN,QAAC,cAAD;AACE,UAAA,eAAe,EAAEJ,YADnB;AAEE,UAAA,UAAU,EAAEK,UAFd;AAGE,UAAA,SAAS,EAAEE;AAHb;AAAA;AAAA;AAAA;AAAA,gBADM,gBAON;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,sBAAf;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,KAAf;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAC,mDAAf;AAAA,uCACE;AAAA,4BAAIP,YAAY,CAACY,OAAb,IAAwBZ,YAAY,CAACY;AAAzC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE;AAAK,gBAAA,SAAS,EAAC,6CAAf;AAAA,wCACE;AACE,kBAAA,GAAG,EAAG,yBAAwBZ,YAAY,CAACyB,KAAM,EADnD;AAEE,kBAAA,GAAG,EAAC,EAFN;AAGE,kBAAA,SAAS,EAAC;AAHZ;AAAA;AAAA;AAAA;AAAA,wBADF,eAME;AAAG,kBAAA,SAAS,EAAC,aAAb;AAAA,0CACE;AAAM,oBAAA,SAAS,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,EAC2C,GAD3C,EAEI,IAAGzB,YAAJ,aAAIA,YAAJ,+CAAIA,YAAY,CAAE0B,MAAlB,yDAAI,qBAAsBC,QAAS,EAFtC;AAAA;AAAA;AAAA;AAAA;AAAA,wBANF,eAUE;AAAG,kBAAA,SAAS,EAAC,aAAb;AAAA,0CACE;AAAM,oBAAA,SAAS,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,EAEI,KAAI3B,YAAL,aAAKA,YAAL,gDAAKA,YAAY,CAAE0B,MAAnB,0DAAK,sBAAsBE,KAAM,EAFpC;AAAA;AAAA;AAAA;AAAA;AAAA,wBAVF,eAcE;AAAK,kBAAA,SAAS,EAAC,oCAAf;AAAA,0CACE;AACE,oBAAA,SAAS,EAAC,oBADZ;AAEE,oBAAA,OAAO,EAAEd,UAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAOE;AACE,oBAAA,SAAS,EAAC,YADZ;AAEE,oBAAA,OAAO,EAAE,MAAMT,UAAU,CAAC,IAAD,CAF3B;AAGE,oBAAA,KAAK,EAAE;AAAEwB,sBAAAA,OAAO,EAAE;AAAX,qBAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAPF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAdF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAuCE;AACE,YAAA,SAAS,EAAC,MADZ;AAEE,YAAA,OAAO,EAAE,MAAMrB,QAAQ,CAAE,SAAQX,EAAG,EAAb,CAFzB;AAAA,uBAIG,GAJH,eAKE;AAAG,cAAA,KAAK,EAAC;AAAT;AAAA;AAAA;AAAA;AAAA,oBALF,WAKuC,GALvC;AAAA;AAAA;AAAA;AAAA;AAAA,kBAvCF;AAAA;AARJ;AAJJ,qBAFF;AAAA,kBADF;AAoED,CA/GM;;GAAMF,a;UACIJ,S,EAQED,W;;;KATNK,a","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/authContext\";\nimport postsApi from \"../../helpers/postsApi\";\nimport { EditingComment } from \"./EditingComment\";\n\nexport const CommentDetail = () => {\n  const params = useParams();\n  const { id, idcomment } = params;\n\n  const { userState } = useContext(AuthContext);\n  const [commentState, setCommentState] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [editing, setEditing] = useState(false);\n  const [reload, setReload] = useState(true);\n  const navigate = useNavigate();\n\n  const fetchPost = async () => {\n    try {\n      const { data } = await postsApi.get(`posts/${id}/comments/${idcomment}`);\n      setCommentState(data.comment);\n      setLoading(false);\n    } catch (error) {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (reload) {\n      fetchPost();\n      setReload(false);\n    }\n  }, [reload]);\n\n  const deletePost = async () => {\n    try {\n      let config = {\n        headers: {\n          authorization: \"Bearer \" + userState.user.token,\n        },\n      };\n      const res = await postsApi.delete(\n        `posts/${id}/comments/${idcomment}`,\n        config\n      );\n      navigate(`/post/${id}`);\n    } catch (error) {\n      alert(error.response?.data?.msg);\n    }\n  };\n  return (\n    <>\n      {\" \"}\n      <>\n        {loading ? (\n          <div>cargando...</div>\n        ) : (\n          <>\n            {editing ? (\n              <EditingComment\n                commentToUpdate={commentState}\n                setEditing={setEditing}\n                setReload={setReload}\n              />\n            ) : (\n              <>\n                <div className=\" container px-5 py-5\">\n                  <div className=\"row\">\n                    <div className=\"col-sm-12 sm-6 col-md-9 d-flex align-items-center\">\n                      <p>{commentState.comment && commentState.comment}</p>\n                    </div>\n                    <div className=\"col-sm-12 sm-6 col-md-3 d-flex flex-column \">\n                      <img\n                        src={`http://localhost:8000/${commentState.image}`}\n                        alt=\"\"\n                        className=\"img-fluid pt-2 mb-4\"\n                      />\n                      <p className=\"text-center\">\n                        <span className=\"my-span\">Author:</span>{\" \"}\n                        {` ${commentState?.author?.fullName}`}\n                      </p>\n                      <p className=\"text-center\">\n                        <span className=\"my-span\">Email:</span>\n                        {`  ${commentState?.author?.email}`}\n                      </p>\n                      <div className=\"d-flex justify-content-between m-0\">\n                        <button\n                          className=\"my-btn-danger  m-2\"\n                          onClick={deletePost}\n                        >\n                          delete\n                        </button>\n                        <button\n                          className=\"my-btn m-2\"\n                          onClick={() => setEditing(true)}\n                          style={{ display: \"block\" }}\n                        >\n                          update\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <button\n                  className=\"back\"\n                  onClick={() => navigate(`/post/${id}`)}\n                >\n                  {\" \"}\n                  <i class=\"bi bi-backspace\"></i> back{\" \"}\n                </button>\n              </>\n            )}\n          </>\n        )}\n      </>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}