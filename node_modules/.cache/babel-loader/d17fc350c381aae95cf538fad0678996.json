{"ast":null,"code":"var _jsxFileName = \"/Users/wilidga/Developer/MERN/FullStack/ITijuana-demo/final-project-front/src/components/comments/EditingComment.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/authContext\";\nimport postsApi from \"../../helpers/postsApi\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const EditingComment = _ref => {\n  _s();\n\n  let {\n    commentToUpdate,\n    setEditing,\n    setReload\n  } = _ref;\n  const [comment, setComment] = useState(commentToUpdate.comment);\n  const [archivo, guardarArchivo] = useState(\"\");\n  const params = useParams();\n  const {\n    id,\n    idcomment\n  } = params;\n  const navigate = useNavigate();\n\n  const leerArchivo = e => {\n    guardarArchivo(e.target.files[0]);\n  };\n\n  const {\n    userState\n  } = useContext(AuthContext);\n\n  const handleChange = _ref2 => {\n    let {\n      target\n    } = _ref2;\n    setComment(target.value);\n  };\n\n  const handleClick = async e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"comment\", comment);\n    formData.append(\"image\", archivo);\n    let config = {\n      headers: {\n        authorization: \"Bearer \" + userState.user.token,\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    };\n\n    try {\n      const res = await postsApi.put(`posts/${id}/comments/${idcomment}`, formData, config);\n      setEditing(false);\n      setReload(true);\n    } catch (error) {\n      var _error$response, _error$response$data;\n\n      alert((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.msg);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"m-5\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      class: \"m-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"m-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          class: \"form-control\",\n          onChange: handleChange,\n          type: \"text\",\n          value: comment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"form-text\",\n          children: \"Update the comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          class: \"form-control mt-3 mb-4\",\n          type: \"file\",\n          name: \"imagen\",\n          onChange: leerArchivo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"form-text mb-3\",\n          children: \"Upload an image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"my-btn\",\n          onClick: handleClick,\n          children: \"submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back\",\n        onClick: () => setEditing(false),\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n          class: \"bi bi-backspace\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), \" back\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n\n_s(EditingComment, \"HXg6NvoB9nxZJ+5RuavEYk7qRK8=\", false, function () {\n  return [useParams, useNavigate];\n});\n\n_c = EditingComment;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditingComment\");","map":{"version":3,"sources":["/Users/wilidga/Developer/MERN/FullStack/ITijuana-demo/final-project-front/src/components/comments/EditingComment.js"],"names":["React","useContext","useState","useNavigate","useParams","AuthContext","postsApi","EditingComment","commentToUpdate","setEditing","setReload","comment","setComment","archivo","guardarArchivo","params","id","idcomment","navigate","leerArchivo","e","target","files","userState","handleChange","value","handleClick","preventDefault","formData","FormData","append","config","headers","authorization","user","token","res","put","error","alert","response","data","msg"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/authContext\";\nimport postsApi from \"../../helpers/postsApi\";\n\nexport const EditingComment = ({ commentToUpdate, setEditing, setReload }) => {\n  const [comment, setComment] = useState(commentToUpdate.comment);\n  const [archivo, guardarArchivo] = useState(\"\");\n  const params = useParams();\n  const { id, idcomment } = params;\n  const navigate = useNavigate();\n\n  const leerArchivo = (e) => {\n    guardarArchivo(e.target.files[0]);\n  };\n\n  const { userState } = useContext(AuthContext);\n\n  const handleChange = ({ target }) => {\n    setComment(target.value);\n  };\n\n  const handleClick = async (e) => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"comment\", comment);\n    formData.append(\"image\", archivo);\n\n    let config = {\n      headers: {\n        authorization: \"Bearer \" + userState.user.token,\n        \"Content-Type\": \"multipart/form-data\",\n      },\n    };\n    try {\n      const res = await postsApi.put(\n        `posts/${id}/comments/${idcomment}`,\n        formData,\n        config\n      );\n      setEditing(false);\n      setReload(true);\n    } catch (error) {\n      alert(error.response?.data?.msg);\n    }\n  };\n  return (\n    <div class=\"m-5\">\n      <form class=\"m-5\">\n        <div class=\"m-5\">\n          <textarea\n            class=\"form-control\"\n            onChange={handleChange}\n            type=\"text\"\n            value={comment}\n          />\n          <div class=\"form-text\">Update the comment</div>\n          <input\n            class=\"form-control mt-3 mb-4\"\n            type=\"file\"\n            name=\"imagen\"\n            onChange={leerArchivo}\n          />\n          <div class=\"form-text mb-3\">Upload an image</div>\n          <button className=\"my-btn\" onClick={handleClick}>\n            submit\n          </button>\n        </div>\n        <button className=\"back\" onClick={() => setEditing(false)}>\n          {\" \"}\n          <i class=\"bi bi-backspace\"></i> back{\" \"}\n        </button>\n      </form>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}